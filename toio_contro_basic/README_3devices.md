# 3个Toio设备中断控制程序（稳定版）

这是针对蓝牙连接限制优化的稳定版本，支持同时控制3个toio设备。

## 为什么是3个设备？

根据蓝牙技术规范和实际测试：
- **BLE（低功耗蓝牙）**建议同时连接不超过5个设备
- **实际稳定性**考虑，3个设备是最佳平衡点
- **避免连接超时**和通信不稳定问题

## 功能特点

1. **稳定的多设备管理**：同时控制3个toio设备，使用ID 0、1、2进行标识
2. **LED颜色区分**：
   - ID 0：红色
   - ID 1：绿色
   - ID 2：蓝色
3. **随机移动**：所有toio启动后自动进行随机移动
4. **中断控制**：通过控制台输入ID号，可以让指定的toio执行特殊动作
5. **特殊动作序列**：
   - 原地旋转180度（0.5秒）
   - 向前移动（1秒）
   - 返回随机移动状态

## 使用方法

1. 确保有3个toio设备并已开机
2. 运行程序：
   ```bash
   python multi_toio_interrupt_control_3devices.py
   ```
3. 程序会自动连接3个toio设备（增加了30秒超时时间）
4. 连接成功后，所有toio开始随机移动
5. 在控制台输入相应的ID号（0-2）来控制对应的toio执行特殊动作
6. 输入'q'退出程序

## 相比4设备版本的改进

1. **连接稳定性**：避免了蓝牙连接数量限制导致的超时错误
2. **增加超时时间**：连接超时时间从默认5秒增加到30秒
3. **更好的错误处理**：优化了连接失败时的处理机制
4. **性能优化**：减少设备数量提高了通信质量

## 故障排除

如果仍然遇到连接问题：

1. **检查设备数量**：确保只有3个toio设备开机
2. **重启蓝牙**：
   ```
   # Windows
   设备管理器 -> 蓝牙 -> 禁用后启用
   
   # 或者重启蓝牙服务
   ```
3. **检查其他蓝牙设备**：断开其他不必要的蓝牙连接
4. **逐个连接测试**：先测试单个toio设备连接是否正常

## 扩展建议

如果您需要控制更多设备，建议：
1. **分组控制**：将toio设备分成多组，每组最多3个
2. **轮换连接**：不同时连接所有设备，而是按需连接
3. **使用多个主机**：每个主机控制3个toio设备 