# 多Toio中断控制程序

这个程序可以同时控制4个toio设备，实现随机移动和中断控制功能。

## 功能特点

1. **多设备管理**：同时控制4个toio设备，使用ID 0、1、2、3进行标识
2. **LED颜色区分**：
   - ID 0：红色
   - ID 1：绿色
   - ID 2：蓝色
   - ID 3：黄色
3. **随机移动**：所有toio启动后自动进行随机移动
4. **中断控制**：通过控制台输入ID号，可以让指定的toio执行特殊动作
5. **特殊动作序列**：
   - 原地旋转180度（0.5秒）
   - 向前移动（1秒）
   - 返回随机移动状态

## 使用方法

1. 确保有4个toio设备并已开机
2. 运行程序：
   ```bash
   python multi_toio_interrupt_control.py
   ```
3. 程序会自动连接4个toio设备
4. 连接成功后，所有toio开始随机移动
5. 在控制台输入相应的ID号（0-3）来控制对应的toio执行特殊动作
6. 输入'q'退出程序

## 程序结构

### ToioController类
- 管理单个toio的状态和行为
- 支持两种状态："random"（随机移动）和"special"（特殊动作）
- 使用asyncio.Event实现状态切换

### MultiToioController类
- 管理所有toio控制器
- 处理用户输入
- 协调多个异步任务

## 技术特点

1. **异步并发**：使用asyncio实现真正的并发控制
2. **状态管理**：每个toio独立管理自己的状态
3. **非阻塞输入**：使用线程执行器处理控制台输入，不会阻塞toio的控制
4. **优雅退出**：正确处理程序退出，确保所有toio停止移动并关闭LED
5. **错误处理**：包含完整的异常处理机制

## 注意事项

1. 确保蓝牙适配器正常工作
2. toio设备需要充满电以保证稳定运行
3. 在平整的桌面上运行，避免toio掉落
4. 如果某个toio正在执行特殊动作，需要等待完成后才能再次触发

## 故障排除

- 如果连接失败，请检查：
  - toio设备是否开机
  - 蓝牙是否开启
  - 是否有其他程序占用toio
- 如果程序无响应，可以使用Ctrl+C强制退出 